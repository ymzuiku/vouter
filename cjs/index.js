var M=Object.create;var u=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var b=(t,e,o)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,l=(t,e)=>{for(var o in e||(e={}))y.call(e,o)&&b(t,o,e[o]);if(d)for(var o of d(e))x.call(e,o)&&b(t,o,e[o]);return t};var E=t=>u(t,"__esModule",{value:!0});var P=(t,e)=>{var o={};for(var n in t)y.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&d)for(var n of d(t))e.indexOf(n)<0&&x.call(t,n)&&(o[n]=t[n]);return o};var F=(t,e)=>{for(var o in e)u(t,o,{get:e[o],enumerable:!0})},I=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of X(e))!y.call(t,s)&&(o||s!=="default")&&u(t,s,{get:()=>e[s],enumerable:!(n=J(e,s))||n.enumerable});return t},N=(t,e)=>I(E(u(t!=null?M(A(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),W=(t=>(e,o)=>t&&t.get(e)||(o=I(E({}),e,1),t&&t.set(e,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var V={};F(V,{routeMap:()=>c,vouter:()=>i});var a=N(require("react"));var B=require("react");var f=require("react"),h=require("react-ob");var L=[],z=t=>{L.push(t)};["popstate","pushState","replaceState","backState"].forEach(t=>{window.addEventListener(t,()=>{t==="popstate"&&r.stack.pop(),L.forEach(e=>{e(t,r.stack)})})});var j=t=>{r.stack.push(t),r.useHash&&(t="/#"+t),history.pushState(null,"",t),window.dispatchEvent(new Event("pushState"))},C=t=>{r.stack.length>0&&r.stack.pop(),r.stack.push(t),r.useHash&&(t="/#"+t),history.replaceState(null,"",t),window.dispatchEvent(new Event("pushState"))},G=()=>{let t=r.stack[r.stack.length-1];r.stack.length===1&&(t=r.onLastBack(t),r.stack[r.stack.length-1]=t),r.stack.length>1&&r.stack.pop(),r.useHash&&(t="/#"+t),history.replaceState(null,"",t),window.dispatchEvent(new Event("backState"))},K=t=>{r.stack=[t],C(t)},r={push:j,replace:C,goBack:G,clearTo:K,listen:z,onLastBack:t=>t,stack:[],useHash:!1};var S=(0,h.CreateObserver)({n:0});r.listen(()=>{S.val.n+=1,S.next()});function $(){return a.createElement("div",{style:{padding:100,margin:"0px auto",textAlign:"center"}},a.createElement("div",null,"Not found page"),a.createElement("button",{style:{padding:"8px 16px",outline:"none",background:"#ddd",margin:20,borderRadius:10},onClick:()=>{i.clearTo("/")}},"Go Home"))}function O(t){t.preventDefault(),t.stopPropagation()}var T={};function q({last:t,path:e,Component:o,notKeep:n,preload:s,preloadDelay:p}){return(0,f.useMemo)(()=>{let k=r.stack.indexOf(e)*100;return n&&!t?null:(s&&!T[e]&&(T[e]=!0,setTimeout(()=>{s.forEach(i.preload)},p||500)),a.createElement(f.Suspense,{key:e,fallback:a.createElement("div",null)},a.createElement("div",{"data-path":e,style:{zIndex:k,position:"absolute",width:"100%",height:"100%",left:0,top:0,visibility:t?"visible":"hidden"},onTouchStart:t?void 0:O,onMouseDown:t?void 0:O},a.createElement(o,{path:e}))))},[t,e])}function U({NotFoundComponent:t=$}){r.stack=[i.nowUrl()],(0,h.useObserver)(S,o=>[o.n]);let e=r.stack.length-1;return a.createElement(a.Fragment,null,r.stack.map((o,n)=>{let s=c[o];return s?a.createElement(q,l({last:e===n,key:o+n},s)):a.createElement(t,{key:o+n})}))}var H=(t,e={})=>{let o={},n=[];return Object.keys(t).forEach(s=>{o[s]=s;let R=t[s],{render:p}=R,k=P(R,["render"]),w=l({path:s,render:p,Component:(0,B.lazy)(p)},k);n.push(w),c[s]=w}),{paths:o,Router:()=>a.createElement(U,l({},e))}};var g;function m(){let t=navigator.userAgent.toLocaleLowerCase();return g=new RegExp("(iphone|ipod|ipad)").test(t)&&new RegExp("(micromessenger)").test(t),g}r.useHash=!0;var D={},c={},Q=t=>{if(typeof window=="undefined"||window.isTest||D[t])return;let e=c[t];if(!e){console.error(`[create-react-ssx] ${t} isn't Router`);return}return D[t]=!0,e.render()};function v(t,e){return e?t+"?"+new URLSearchParams(e).toString():t}var i={search:()=>{let t=location.href.split("#")[0].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},hashSearch:()=>{let t=location.href.split("#")[1].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},nowUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1].split("?")[0]},nowFullUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1]},push:(t,e)=>{m()?i.replace(t,e):r.push(v(t,e))},replace:(t,e)=>{r.replace(v(t,e))},goBack:()=>{m()?i.replace(r.stack[r.stack.length-1]):r.goBack()},clearTo:(t,e)=>{r.clearTo(v(t,e))},preload:Q,isIOSWechat:m,create:H,setOnLastBack:t=>{r.onLastBack=t}};module.exports=W(V);
