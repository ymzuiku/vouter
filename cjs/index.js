var D=Object.create;var p=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,J=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var x=(t,e,o)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,u=(t,e)=>{for(var o in e||(e={}))y.call(e,o)&&x(t,o,e[o]);if(f)for(var o of f(e))R.call(e,o)&&x(t,o,e[o]);return t};var b=t=>p(t,"__esModule",{value:!0});var E=(t,e)=>{var o={};for(var n in t)y.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&f)for(var n of f(t))e.indexOf(n)<0&&R.call(t,n)&&(o[n]=t[n]);return o};var X=(t,e)=>{for(var o in e)p(t,o,{get:e[o],enumerable:!0})},P=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of F(e))!y.call(t,a)&&(o||a!=="default")&&p(t,a,{get:()=>e[a],enumerable:!(n=M(e,a))||n.enumerable});return t},A=(t,e)=>P(b(p(t!=null?D(J(t)):{},"default",!e&&t&&t.__esModule?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),N=(t=>(e,o)=>t&&t.get(e)||(o=P(b({}),e,1),t&&t.set(e,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var Q={};X(Q,{routeMap:()=>c,vouter:()=>i});var s=A(require("react"));var U=require("react");var d=require("react"),h=require("react-ob");var L=[],W=t=>{L.push(t)};["popstate","pushState","replaceState","backState"].forEach(t=>{window.addEventListener(t,()=>{t==="popstate"&&r.stack.pop(),L.forEach(e=>{e(t,r.stack)})})});var z=t=>{r.stack.push(t),r.useHash&&(t="/#"+t),history.pushState(null,"",t),window.dispatchEvent(new Event("pushState"))},C=t=>{r.stack.length>0&&r.stack.pop(),r.stack.push(t),r.useHash&&(t="/#"+t),history.replaceState(null,"",t),window.dispatchEvent(new Event("replaceState"))},j=()=>{let t=r.stack[r.stack.length-1];r.stack.length===1&&(t=r.onLastBack(t),r.stack[r.stack.length-1]=t),r.stack.length>1&&r.stack.pop(),r.useHash&&(t="/#"+t),history.replaceState(null,"",t),window.dispatchEvent(new Event("backState"))},G=t=>{r.stack=[t],C(t)},r={push:z,replace:C,goBack:j,clearTo:G,listen:W,onLastBack:t=>t,stack:[],useHash:!1};var S=(0,h.CreateObserver)({n:0});r.listen(()=>{S.val.n+=1,S.next()});function K(){return s.createElement("div",{style:{padding:100,margin:"0px auto",textAlign:"center"}},s.createElement("div",null,"Not found page"),s.createElement("button",{style:{padding:"8px 16px",outline:"none",background:"#ddd",margin:20,borderRadius:10},onClick:()=>{i.clearTo("/")}},"Go Home"))}function I(t){t.preventDefault(),t.stopPropagation()}var O={};function $({last:t,path:e,Component:o,notKeep:n,preload:a,preloadDelay:l}){return(0,d.useMemo)(()=>{let k=r.stack.indexOf(e)*100;return n&&!t?null:(a&&!O[e]&&(O[e]=!0,setTimeout(()=>{a.forEach(i.preload)},l||500)),s.createElement(d.Suspense,{key:e,fallback:s.createElement("div",null)},s.createElement("div",{"data-path":e,style:{zIndex:k,position:"absolute",width:"100%",height:"100%",left:0,top:0,visibility:t?"visible":"hidden"},onTouchStart:t?void 0:I,onMouseDown:t?void 0:I},s.createElement(o,{path:e}))))},[t,e])}function T({NotFoundComponent:t=K}){r.stack.length||(r.stack=[i.nowFullUrl()]),(0,h.useObserver)(S,o=>[o.n]);let e=r.stack.length-1;return s.createElement(s.Fragment,null,r.stack.map((o,n)=>{let a=c[o.split("?")[0]];return a?s.createElement($,u({last:e===n,key:o+n},a)):s.createElement(t,{key:o+n})}))}var B=(t,e={})=>{let o={};return Object.keys(t).forEach(n=>{o[n]=n;let w=t[n],{render:a}=w,l=E(w,["render"]),k=u({path:n,render:a,Component:(0,U.lazy)(a)},l);c[n]=k}),{paths:o,Router:()=>s.createElement(T,u({},e))}};var g;function m(){let t=navigator.userAgent.toLocaleLowerCase();return g=new RegExp("(iphone|ipod|ipad)").test(t)&&new RegExp("(micromessenger)").test(t),g}r.useHash=!0;var H={},c={},q=t=>{if(typeof window=="undefined"||window.isTest||H[t])return;let e=c[t];if(!e){console.error(`[create-react-ssx] ${t} isn't Router`);return}return H[t]=!0,e.render()};function v(t,e){return e?t+"?"+new URLSearchParams(e).toString():t}var i={search:()=>{let t=location.href.split("#")[0].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},hashSearch:()=>{let t=location.href.split("#")[1].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},nowUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1].split("?")[0]},nowFullUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1]},push:(t,e)=>{m()?i.replace(t,e):r.push(v(t,e))},replace:(t,e)=>{r.replace(v(t,e))},goBack:()=>{m()?i.replace(r.stack[r.stack.length-1]):r.goBack()},clearTo:(t,e)=>{r.clearTo(v(t,e))},preload:q,isIOSWechat:m,create:B,setOnLastBack:t=>{r.onLastBack=t}};module.exports=N(Q);
