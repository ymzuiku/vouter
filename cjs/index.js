var J=Object.create;var f=Object.defineProperty,X=Object.defineProperties,A=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,z=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var E=(t,e,r)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,p=(t,e)=>{for(var r in e||(e={}))v.call(e,r)&&E(t,r,e[r]);if(g)for(var r of g(e))b.call(e,r)&&E(t,r,e[r]);return t},P=(t,e)=>X(t,N(e));var C=(t,e)=>{var r={};for(var n in t)v.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&g)for(var n of g(t))e.indexOf(n)<0&&b.call(t,n)&&(r[n]=t[n]);return r};var j=(t,e)=>{for(var r in e)f(t,r,{get:e[r],enumerable:!0})},L=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of W(e))!v.call(t,a)&&a!==r&&f(t,a,{get:()=>e[a],enumerable:!(n=A(e,a))||n.enumerable});return t};var G=(t,e,r)=>(r=t!=null?J(z(t)):{},L(e||!t||!t.__esModule?f(r,"default",{value:t,enumerable:!0}):r,t)),_=t=>L(f({},"__esModule",{value:!0}),t);var et={};j(et,{Router:()=>x,useHistoryChange:()=>H,vouter:()=>tt});module.exports=_(et);var s=G(require("react"));var M=require("react");var u={};var c=require("react"),w=require("react-ob");var D=[],$=t=>{D.push(t)};["popstate","pushState","replaceState","backState"].forEach(t=>{window.addEventListener(t,()=>{t==="popstate"&&o.stack.pop(),D.forEach(e=>{e(t,o.stack)})})});var h=t=>({url:t,path:t.split("?")[0],time:Date.now(),index:o.stack.length}),q=t=>{o.stack.forEach(e=>{e.tempData=void 0}),o.stack.push(h(t)),o.useHash&&(t="/#"+t),history.pushState(null,"",t),window.dispatchEvent(new Event("pushState"))},U=(t,e)=>{if(o.stack.forEach(r=>{r.tempData=void 0}),o.stack.length>0&&o.stack.pop(),o.stack.push(h(t)),o.useHash&&(t="/#"+t),e){let r=o.stack[o.stack.length-1];r.tempData=e}history.replaceState(null,"",t),window.dispatchEvent(new Event("replaceState"))},K=t=>{o.stack.length>1&&o.stack.pop();let e=o.stack[o.stack.length-1];if(o.stack.length===1){let n=e.time,a=e.url;e=h(o.onLastBack(e)),a===e.url&&(e.time=n),o.stack[o.stack.length-1]=e}let r=e.url;o.useHash&&(r="/#"+e.url),t&&(o.stack[o.stack.length-1].tempData=t),history.replaceState(null,"",r),window.dispatchEvent(new Event("backState"))},Q=t=>{o.stack=[h(t)],U(t)},o={push:q,replace:U,goBack:K,clearTo:Q,listen:$,onLastBack:t=>t.url,newStack:h,stack:[],useHash:!1};function d(t,e){return e?t+"?"+new URLSearchParams(e).toString():t}var k;function S(){let t=navigator.userAgent.toLocaleLowerCase();return k=new RegExp("(iphone|ipod|ipad)").test(t)&&new RegExp("(micromessenger)").test(t),k}o.useHash=!0;var I={},V=t=>{if(typeof window=="undefined"||window.isTest||I[t])return;let e=u[t];if(!e){console.error(`[create-react-ssx] ${t} isn't Router`);return}return I[t]=!0,e.render()},i={search:()=>{let t=location.href.split("#")[0].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},hashSearch:()=>{let t=location.href.split("#")[1].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},nowUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1].split("?")[0]},nowFullUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1]},push:(t,e)=>{S()?i.replace(t,e):o.push(d(t,e))},replace:(t,e,r)=>{o.replace(d(t,e),r)},goBack:t=>{S()?i.replace(o.stack[o.stack.length-1].url,t):o.goBack(t)},clearTo:(t,e)=>{o.clearTo(d(t,e))},preload:V,newStack:o.newStack,isIOSWechat:S,getStack:()=>o.stack,getLastStack:()=>o.stack[o.stack.length-1],isBack:()=>{let t=i.getLastStack();return t.url===i.nowFullUrl()?t.time+100<Date.now():!1},setOnLastBack:t=>{o.onLastBack=t}};var R=(0,w.CreateObserver)({n:0});o.listen(()=>{R.val.n+=1,R.next()});function Y(){return s.createElement("div",{style:{padding:100,margin:"0px auto",textAlign:"center"}},s.createElement("div",null,"Not found page"),s.createElement("button",{style:{padding:"8px 16px",outline:"none",background:"#ddd",margin:20,borderRadius:10},onClick:()=>{i.clearTo("/")}},"Go Home"))}function T(t){t.preventDefault(),t.stopPropagation()}var B={},O=(0,c.createContext)({stack:o.newStack("/"),isBack:!1,last:!1});function H(){return(0,c.useContext)(O)}function Z({last:t,path:e,stack:r,Component:n,notKeep:a,preload:l,preloadDelay:y}){return(0,c.useMemo)(()=>{if(a&&!t)return null;let m=r.index*100;return l&&!B[e]&&(B[e]=!0,setTimeout(()=>{l.forEach(i.preload)},y||500)),s.createElement(O.Provider,{value:{stack:r,isBack:t&&r.time+100<Date.now(),last:t}},s.createElement(c.Suspense,{key:e,fallback:s.createElement("div",null)},s.createElement("div",{"data-path":e,style:{zIndex:m,position:"absolute",width:"100%",height:"100%",left:0,top:0},onTouchStart:t?void 0:T,onMouseDown:t?void 0:T},s.createElement(n,null))))},[t,r.url])}function x({NotFoundComponent:t=Y}){o.stack.length||(o.stack=[i.newStack(i.nowFullUrl())]),(0,w.useObserver)(R,r=>[r.n]);let e=o.stack.length-1;return s.createElement(s.Fragment,null,o.stack.map((r,n)=>{let a=u[r.path];return a?s.createElement(Z,p({last:e===n,key:r.url+n,stack:r},a)):s.createElement(t,{key:r.url+n})}))}var F=(t,e={})=>{let r={};return Object.keys(t).forEach(n=>{r[n]=n;let m=t[n],{render:a}=m,l=C(m,["render"]),y=p({path:n,render:a,Component:(0,M.lazy)(a)},l);u[n]=y}),{paths:r,Router:()=>s.createElement(x,p({},e))}};var tt=P(p({},i),{create:F});
