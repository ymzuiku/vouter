var M=Object.create;var l=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var X=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,A=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var R=(t,e,o)=>e in t?l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,f=(t,e)=>{for(var o in e||(e={}))w.call(e,o)&&R(t,o,e[o]);if(g)for(var o of g(e))b.call(e,o)&&R(t,o,e[o]);return t};var E=(t,e)=>{var o={};for(var n in t)w.call(t,n)&&e.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&g)for(var n of g(t))e.indexOf(n)<0&&b.call(t,n)&&(o[n]=t[n]);return o};var N=(t,e)=>{for(var o in e)l(t,o,{get:e[o],enumerable:!0})},P=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of X(e))!w.call(t,a)&&a!==o&&l(t,a,{get:()=>e[a],enumerable:!(n=J(e,a))||n.enumerable});return t};var W=(t,e,o)=>(o=t!=null?M(A(t)):{},P(e||!t||!t.__esModule?l(o,"default",{value:t,enumerable:!0}):o,t)),z=t=>P(l({},"__esModule",{value:!0}),t);var Y={};N(Y,{routeMap:()=>p,vouter:()=>i});module.exports=z(Y);var s=W(require("react"));var O=require("react");var c=require("react"),k=require("react-ob");var C=[],j=t=>{C.push(t)};["popstate","pushState","replaceState","backState"].forEach(t=>{window.addEventListener(t,()=>{t==="popstate"&&r.stack.pop(),C.forEach(e=>{e(t,r.stack)})})});var h=t=>({url:t,path:t.split("?")[0],time:Date.now(),index:r.stack.length}),G=t=>{r.stack.forEach(e=>{e.tempData=void 0}),r.stack.push(h(t)),r.useHash&&(t="/#"+t),history.pushState(null,"",t),window.dispatchEvent(new Event("pushState"))},L=(t,e)=>{if(r.stack.forEach(o=>{o.tempData=void 0}),r.stack.length>0&&r.stack.pop(),r.stack.push(h(t)),r.useHash&&(t="/#"+t),e){let o=r.stack[r.stack.length-1];o.tempData=e}history.replaceState(null,"",t),window.dispatchEvent(new Event("replaceState"))},K=t=>{r.stack.length>1&&r.stack.pop();let e=r.stack[r.stack.length-1];if(r.stack.length===1){let n=e.time,a=e.url;e=h(r.onLastBack(e)),a===e.url&&(e.time=n),r.stack[r.stack.length-1]=e}let o=e.url;r.useHash&&(o="/#"+e.url),t&&(r.stack[r.stack.length-1].tempData=t),history.replaceState(null,"",o),window.dispatchEvent(new Event("backState"))},$=t=>{r.stack=[h(t)],L(t)},r={push:G,replace:L,goBack:K,clearTo:$,listen:j,onLastBack:t=>t.url,newStack:h,stack:[],useHash:!1};var x=(0,k.CreateObserver)({n:0});r.listen(()=>{x.val.n+=1,x.next()});function q(){return s.createElement("div",{style:{padding:100,margin:"0px auto",textAlign:"center"}},s.createElement("div",null,"Not found page"),s.createElement("button",{style:{padding:"8px 16px",outline:"none",background:"#ddd",margin:20,borderRadius:10},onClick:()=>{i.clearTo("/")}},"Go Home"))}function D(t){t.preventDefault(),t.stopPropagation()}var B={},I=(0,c.createContext)({stack:r.newStack("/"),isBack:!1,last:!1});function T(){return(0,c.useContext)(I)}function Q({last:t,path:e,stack:o,Component:n,notKeep:a,preload:u,preloadDelay:y}){return(0,c.useMemo)(()=>{if(a&&!t)return null;let d=o.index*100;return u&&!B[e]&&(B[e]=!0,setTimeout(()=>{u.forEach(i.preload)},y||500)),s.createElement(I.Provider,{value:{stack:o,isBack:t&&o.time+100<Date.now(),last:t}},s.createElement(c.Suspense,{key:e,fallback:s.createElement("div",null)},s.createElement("div",{"data-path":e,style:{zIndex:d,position:"absolute",width:"100%",height:"100%",left:0,top:0},onTouchStart:t?void 0:D,onMouseDown:t?void 0:D},s.createElement(n,null))))},[t,o.url])}function U({NotFoundComponent:t=q}){r.stack.length||(r.stack=[i.newStack(i.nowFullUrl())]),(0,k.useObserver)(x,o=>[o.n]);let e=r.stack.length-1;return s.createElement(s.Fragment,null,r.stack.map((o,n)=>{let a=p[o.path];return a?s.createElement(Q,f({last:e===n,key:o.url+n,stack:o},a)):s.createElement(t,{key:o.url+n})}))}var H=(t,e={})=>{let o={};return Object.keys(t).forEach(n=>{o[n]=n;let d=t[n],{render:a}=d,u=E(d,["render"]),y=f({path:n,render:a,Component:(0,O.lazy)(a)},u);p[n]=y}),{paths:o,Router:()=>s.createElement(U,f({},e))}};var m;function S(){let t=navigator.userAgent.toLocaleLowerCase();return m=new RegExp("(iphone|ipod|ipad)").test(t)&&new RegExp("(micromessenger)").test(t),m}r.useHash=!0;var F={},p={},V=t=>{if(typeof window=="undefined"||window.isTest||F[t])return;let e=p[t];if(!e){console.error(`[create-react-ssx] ${t} isn't Router`);return}return F[t]=!0,e.render()};function v(t,e){return e?t+"?"+new URLSearchParams(e).toString():t}var i={search:()=>{let t=location.href.split("#")[0].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},hashSearch:()=>{let t=location.href.split("#")[1].split("?");return t.length<2?new URLSearchParams:new URLSearchParams(t[1])},nowUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1].split("?")[0]},nowFullUrl:()=>{if(!location.hash)return"/";let t=location.hash.split("#");return t.length<2?"/":t[1]},push:(t,e)=>{S()?i.replace(t,e):r.push(v(t,e))},replace:(t,e,o)=>{r.replace(v(t,e),o)},goBack:t=>{S()?i.replace(r.stack[r.stack.length-1].url,t):r.goBack(t)},clearTo:(t,e)=>{r.clearTo(v(t,e))},preload:V,newStack:r.newStack,isIOSWechat:S,create:H,getStack:()=>r.stack,getLastStack:()=>r.stack[r.stack.length-1],isBack:()=>{let t=i.getLastStack();return t.url===i.nowFullUrl()?t.time+100<Date.now():!1},useHistoryChange:T,setOnLastBack:t=>{r.onLastBack=t}};
